
https://www.infoq.cn/article/4SE0m7cBEFJL_wlfWlUS

CPU：除非需要 SSL 和日志压缩，否则 Kafka 不需要强大的 CPU。而且，使用的内核越多，并行性越好。而且在大多数情况下，压缩也不会产生影响，
应该使用 LZ4 编解码器来提供最佳性能。

RAM：在大多数情况下，Kafka 可以以 6 GB 的内存运行堆空间。对于特别重的生产负载，使用 32 GB 以上的机器。
额外的 RAM 将用于支持 OS 页面缓存和提高客户端吞吐量。虽然 Kafka 可以以更少的 RAM 运行，但当可用的内存较少时，它处理负载的能力就会受到限制。

磁盘：如果在 RAID 设置中使用多个驱动器，就该 Kafka 大显身手了。由于 Kafka 的顺序磁盘 I/O 范式，
所以 SSD 不会提供太多的优势，不应该使用 NAS。

网络和文件系统：建议使用 XFS，如果条件允许，还可以将集群放在单个数据中心。同时，应尽可能提供更多的网络带宽。


一个重要的实践是将 Kafka 的默认复制因子从两个增加到三个，这一条在大多数生产环境中都合适。
这样做可以确保一个代理出现问题不要太要紧，甚至两个代理都出问题了也不会中断可用性，尽管这种情况不太可能发生

申请：
3台：16核32g云盘


kafka的机器选型原则
https://cloud.tencent.com/developer/article/1648883
一、硬盘
kafka磁盘， 会持久化每条消息到硬件存储，当达到一定数量时，broker成功接收才通知client发送成功，这时候才允许删磁盘。消息越快写到磁盘，给客户端的请求延时越低。消息会被保存一段时间再删除。

kafka压缩值得是将消息压缩存到磁盘，可以节省一定的磁盘空间需要，取决于压缩比

kafka因为是顺序写磁盘，所以对ssd优势不是很敏感。所以对成本有着重考虑的话，也可以选择机械硬盘

容灾方面，kafka除了RAID（一般采用RAID10，兼具速度和安全）还有自身的JBOD方案

二、内存
内存规划原则是

尽量分配更多的内存给os的page cache

不要设置broker为过大堆内存，不超过6G

Page cache大小超过一个日志段大小

三、cpu
对cpu没啥要求吗，也有的，一个是需要多核，因为kafka会创建几十个后台线程，多个辣鸡回收线程。主频可以不要求高，但是核数一定要得到保证

四、网络
业务一般使用kafka具有 日高峰点，所以考虑kafka网络带宽需要，测试高峰值的突发流量，一般以1/3的能力容量来保证。

同时还要考虑机房选型